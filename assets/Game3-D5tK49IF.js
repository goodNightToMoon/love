import{_ as F,a as M,c as o,e as t,J as N,t as p,F as O,r as V,s as b,f as m,i as u,k as r}from"./index-DptZZeoZ.js";const z={class:"game-container snake"},T={class:"game-info"},j={class:"score"},E={class:"status"},H={key:1,class:"mask"},J={class:"mask-score"},L={class:"direction-btn"},P={class:"dir-middle"},U={class:"control-btn"},v=18,_=324,C=324,W=200,q={__name:"Game3",setup(A){const $=u(null),i=u([{x:5,y:5}]),c=u("right"),s=u(null),y=u(0),l=u(!1),n=u(!1),f=u(null),x=()=>{let e;do e={x:Math.floor(Math.random()*(_/v)),y:Math.floor(Math.random()*(C/v))};while(i.value.some(a=>a.x===e.x&&a.y===e.y));s.value=e},k=e=>{!l.value||n.value||e==="up"&&c.value==="down"||e==="down"&&c.value==="up"||e==="left"&&c.value==="right"||e==="right"&&c.value==="left"||(c.value=e)},G=()=>{const e={...i.value[0]};switch(c.value){case"up":e.y--;break;case"down":e.y++;break;case"left":e.x--;break;case"right":e.x++;break}i.value.unshift(e),s.value&&e.x===s.value.x&&e.y===s.value.y?(y.value+=10,x()):i.value.pop(),h(e)},h=e=>{if(e.x<0||e.x>=_/v||e.y<0||e.y>=C/v){g();return}i.value.slice(1).some(a=>a.x===e.x&&a.y===e.y)&&g()},g=()=>{clearInterval(f.value),l.value=!1,n.value=!0},I=()=>{n.value||(l.value=!0,s.value||x(),f.value=setInterval(G,W))},S=()=>{clearInterval(f.value),l.value=!1},w=()=>{i.value=[{x:5,y:5}],c.value="right",s.value=null,y.value=0,l.value=!1,n.value=!1,clearInterval(f.value)};return M(()=>{clearInterval(f.value)}),(e,a)=>(r(),o("div",z,[a[6]||(a[6]=t("h2",null,"贪吃蛇",-1)),a[7]||(a[7]=t("p",{class:"game-desc"},"点击方向键控制，吃食物得分，撞墙/撞自己则结束",-1)),t("div",T,[t("span",null,[a[4]||(a[4]=N("得分：",-1)),t("b",j,p(y.value),1)]),t("div",E,p(l.value?"游戏中":n.value?"游戏结束":"未开始"),1)]),t("div",{class:"game-canvas",ref_key:"canvas",ref:$},[(r(!0),o(O,null,V(i.value,(d,B)=>(r(),o("div",{class:"snake-body",key:B,style:b({left:`${d.x*v}px`,top:`${d.y*v}px`})},null,4))),128)),s.value?(r(),o("div",{key:0,class:"food",style:b({left:`${s.value.x*v}px`,top:`${s.value.y*v}px`})},null,4)):m("",!0),n.value?(r(),o("div",H,[a[5]||(a[5]=t("p",{class:"mask-text"},"游戏结束",-1)),t("p",J,"最终得分："+p(y.value),1)])):m("",!0)],512),t("div",L,[t("button",{onClick:a[0]||(a[0]=d=>k("up")),class:"dir-btn up"},"↑"),t("div",P,[t("button",{onClick:a[1]||(a[1]=d=>k("left")),class:"dir-btn left"},"←"),t("button",{onClick:a[2]||(a[2]=d=>k("right")),class:"dir-btn right"},"→")]),t("button",{onClick:a[3]||(a[3]=d=>k("down")),class:"dir-btn down"},"↓")]),t("div",U,[!l.value&&!n.value?(r(),o("button",{key:0,onClick:I},"开始游戏")):m("",!0),l.value&&!n.value?(r(),o("button",{key:1,onClick:S},"暂停游戏")):m("",!0),!l.value&&n.value?(r(),o("button",{key:2,onClick:w},"重新开始")):m("",!0)])]))}},Q=F(q,[["__scopeId","data-v-6311f8aa"]]);export{Q as default};
